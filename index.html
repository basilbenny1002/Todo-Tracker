<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo Tracker</title>
    <link rel="stylesheet" href="style.css">
    <!-- html2canvas for screenshot functionality -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>

    <!-- Animated Background -->
    <div class="background-mesh">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <div class="app-container">
        <header>
            <div>
                <h1>My Day</h1>
                <div class="date-badge" id="current-date">Loading...</div>
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-primary" onclick="confirmDeleteAll()">
                    Delete All
                </button>
                <button class="btn btn-primary" onclick="openReport()">
                    Daily Report
                </button>
            </div>
        </header>

        <div id="projects-container">
            <!-- Projects will be injected here by JS -->
        </div>

        <!-- Inline Add Form (Hidden by default) -->
        <div id="add-form-container" class="add-form-container">
            <div class="add-form-row">
                <label style="display:block; margin-bottom:8px; font-weight:600; font-size:0.9rem; color:#666;">Main Heading (Project)</label>
                <input type="text" id="new-project-input" class="add-form-input" placeholder="e.g., Website Redesign" list="project-suggestions">
                <datalist id="project-suggestions"></datalist>
            </div>
            
            <div id="new-subtasks-container">
                <label style="display:block; margin-bottom:8px; font-weight:600; font-size:0.9rem; color:#666;">Sub Tasks</label>
                <!-- Initial inputs will be generated by JS -->
            </div>

            <div class="add-form-actions">
                <button class="btn btn-primary" style="background:var(--accent-blue); flex:2;" onclick="submitNewEntry()">Add to List</button>
                <button class="btn" style="background:#f5f5f7; flex:1;" onclick="cancelAddEntry()">Cancel</button>
            </div>
        </div>

        <!-- New Note Form -->
        <div id="add-note-container" class="add-form-container" style="display:none;">
            <div class="add-form-row">
                <input type="text" id="new-note-title" class="add-form-input" placeholder="Heading (Optional)" style="font-weight:bold;">
            </div>
            <div class="add-form-row">
                <textarea id="new-note-content" class="add-form-input" placeholder="Write your note here..." rows="4" style="resize: vertical; font-family: inherit;"></textarea>
            </div>
            <div class="add-form-actions">
                <button class="btn btn-primary" style="background:var(--accent-blue); flex:2;" onclick="submitNewNote()">Add Note</button>
                <button class="btn" style="background:#f5f5f7; flex:1;" onclick="cancelAddNote()">Cancel</button>
            </div>
        </div>

        <button id="btn-show-add" class="btn-add-main" onclick="showAddForm()">
            + Add Task / Project
        </button>
        
        <button id="btn-show-note" class="btn-add-main" style="margin-top: 10px;" onclick="showNoteForm()">
            + Add Note / Thought
        </button>
    </div>

    <!-- Report Modal -->
    <div id="report-modal" class="modal-overlay">
        <div class="modal-card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h2 style="margin:0;">Daily Summary</h2>
                <button class="btn" onclick="closeReport()">âœ•</button>
            </div>

            <!-- This div is what gets captured as an image -->
            <div id="report-preview-content" class="report-preview">
                <div class="report-header">
                    <span style="font-weight:bold; font-size:1.2rem;">Daily Report</span>
                    <span id="rep-date" style="color:#666;"></span>
                </div>

                <div class="report-stats-grid">
                    <div class="stat-item">
                        <span class="stat-number" id="rep-completed-total">0/0</span>
                        <span class="stat-label">Completed</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="rep-time">0m 0s</span>
                        <span class="stat-label">Focus Time</span>
                    </div>
                </div>

                <div id="rep-list">
                    <!-- List content -->
                </div>
            </div>

            <div style="display:flex; gap:10px; margin-top:20px;">
                <button class="btn-primary" style="width:100%" onclick="copyReportImage()">Copy Image to Clipboard</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal-overlay">
        <div class="modal-card" style="max-width: 400px; text-align: center;">
            <h3 id="confirm-title" style="margin-top: 0;">Are you sure?</h3>
            <p id="confirm-message" style="color: #666; margin-bottom: 25px;">This action cannot be undone.</p>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button id="confirm-yes-btn" class="btn btn-primary" style="background: var(--status-red); flex: 1;" onclick="executeDelete()">Delete</button>
                <button class="btn" style="background: #f5f5f7; flex: 1;" onclick="closeConfirmModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
